{% extends "base.html" %}
{% load datum_or_none %}

{% block title %}{{ competition.name }} Soccer History {% endblock %}
{% block metadescription %}{{ competition.name }} soccer stats with standings, results, lineups, awards, all-time stats...{% endblock %}

{% block extrahead %}
<style>
#attendance-chart {
position: fixed;
margin-left: 5%;
top: 10%;
}
</style>
{% endblock %}

{% block content %}


<h3><a href="{% url competition_detail competition.slug %}">{{ competition }}</a></h3>


<ul id="tabs"></ul>

<div id="tab_wrapper">


<div tab="yearly">


{% if competition.season_set.exists %}
<table>
  <tr>
    <th></th>
    <th>avg</th>
    <th>total</th>
    <th>gms</th>
  </tr>
{% for season in competition.season_set.all %}
<tr>
  <td><a href="{% url season_detail competition.slug season.slug %}">{{ season.name }}</a></td>
  <td>{{ season.average_attendance }}</td>
  <td>{{ season.total_attendance }}</td>
  <td>{{ season.games_with_attendance }}</td>
</tr>
{% endfor %}
</table>

{% endif %}

</div>


<div tab="records">

  {% if top_attendance_games %}
  <p>best attendances</p>
  {% include "templatetags/games/attendance.html" with games=top_attendance_games %}
  {% endif %}

  {% if worst_attendance_games %}
  <p>worst attendances</p>
  {% include "templatetags/games/attendance.html" with games=worst_attendance_games %}
  {% endif %}


</div>

<div tab="charts">

<div id="attendance-chart">
</div>

<script>

var zdata = {{ team_data|safe }}; // unused
var tdata = {{ attendance_data|safe }};
yearAttendanceChart("#attendance-chart", tdata);

</script>

</div>

</div>


{% endblock %}
