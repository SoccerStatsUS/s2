{% extends "base.html" %}
{% load datum_or_none %}

{% block title %}{{ team.name }} Results, Lineups, & Statistics{% endblock %}
{% block metadescription %}{{ team.name }} soccer stats with results, lineups, awards, all-time stats, managers...{% endblock %}

{% block extrahead %}

<script type="text/javascript">
  $(document).ready(function (){
  $("div[tab='games']").load("{% url games_ajax_by_id %}?team={{ team.id }}");
  $("div[tab='stats']").load("{% url stats_ajax_by_id %}?team={{ team.id }}");
  });
</script>

{% endblock %}


{% block content %}

<h2>{{ team.name }}</h2>


<ul id="tabs"></ul>

<div id="tab_wrapper">


{% if team.standing_set.exists %}
<div tab="standings">
{% include "templatetags/standings.html" with standings=team.standings_by_date %}
</div>
{% endif %}

{% if stats %}
<div tab="stats">
</div>
{% endif %}

{% if team.game_set.exists %}
<div tab="games">
</div>
{% endif %}


{% if team.awards.exists %}
<div tab="honors">

<table>
{% for award in team.awards.all %}
<tr>
  <td><a href="{% url season_detail award.season.competition.slug award.season.slug %}">{{ award.season.name }}</a></td>
  <td><a href="{% url award_detail award.award.id %}">{{ award.award.name }}</a></td>
  <td><a href="{% url competition_detail award.award.competition.slug %}">{{ award.award.competition }}</a></td>
</tr>
{% endfor %}
</table>
</div>
{% endif %}

{% if team.position_set.exists %}
<div tab="staff">

<table>
{% for position in team.position_set.all %}
<tr>
  <td><a href="{% url person_detail position.person.slug %}">{{ position.person }}</a></td>
  <td>{{ position.name }}</td>
  {% if position.start %}
  <td><a href="{% url date_detail position.start.year position.start.month position.start.day %}">{{ position.start|default_if_none:'' }}</a></td>
  {% else %}
  <td></td>
  {% endif %}

  {% if position.end %}
  <td><a href="{% url date_detail position.end.year position.end.month position.end.day %}">{{ position.end|default_if_none:'' }}</td>
  {% else %}
  <td></td>
  {% endif %}

</tr>
{% endfor %}
</table>
</div>
{% endif %}

{% if head_coaches %}
<div tab="coaches">



<table>

<thead>
  <tr>
    <th>name</th>
    <th>start</th>
    <th>end</th>
    <th>wins</th>
    <th>losses</th>
    <th>ties</th>
    <th>%</th>
  </tr>
</thead>

{% for position in head_coaches %}
<tr>
  <td><a href="{% url person_detail position.person.slug %}">{{ position.person }}</a></td>
  {% if position.start %}
  <td><a href="{% url date_detail position.start.year position.start.month position.start.day %}">{{ position.start|date:"m-d-Y" }}</a></td>
  {% else %}
  <td></td>
  {% endif %}

  {% if position.end %}
  <td><a href="{% url date_detail position.end.year position.end.month position.end.day %}">{{ position.end|date:"m-d-Y" }}</td>
  {% else %}
  <td></td>
  {% endif %}

  {% datum_or_grey position.wins %}
  {% datum_or_grey position.ties %}
  {% datum_or_grey position.losses %}
  {% datum_or_grey position.win_percentage|floatformat:3 %}

</tr>
{% endfor %}
</table>
</div>

{% endif %}



{% if team.pick_set.exists %}
<div tab="draft picks">
{% include "templatetags/draft.html" with picks=team.pick_set.all %}
</div>
{% endif %}


</div>

{% endblock %}

