{% extends "base.html" %}
{% load datum_or_none %}

{% block title %}{{ team.name }} - {% endblock %}

{% block content %}

  <h2>{{ team.name }}</h2>

{% comment %}
  <h4>est. {{ team.founded }}</h4>
  <h4>Logo</h4>
  <h4>Current coach</h4>
  <h4>Stadium</h4>
  <h4>Owner</h4>
  <h4>Website</h4>
{% endcomment %}


<h3>Honors</h3>
<table>
{% for award in team.awards.all %}
<tr>
  <td><a href="{% url season_detail award.season.competition.slug award.season.slug %}">{{ award.season.name }}</a></td>
  <td><a href="{% url competition_detail award.award.competition.slug %}">{{ award.award.competition }}</a></td>
  <td><a href="{% url award_detail award.award.id %}">{{ award.award.name }}</a></td>
</tr>
{% endfor %}
</table>

<h3>Employees</h3>
<table>
{% for position in team.position_set.all %}
<tr>
  <td><a href="{% url person_detail position.person.slug %}">{{ position.person }}</a></td>
  <td>{{ position.name }}</td>
  {% if position.start %}
  <td><a href="{% url date_detail position.start.year position.start.month position.start.day %}">{{ position.start|default_if_none:'' }}</a></td>
  {% else %}
  <td></td>
  {% endif %}

  {% if position.end %}
  <td><a href="{% url date_detail position.end.year position.end.month position.end.day %}">{{ position.end|default_if_none:'' }}</td>
  {% else %}
  <td></td>
  {% endif %}

</tr>
{% endfor %}
</table>

<h3>Draft picks</h3>
<table>
{% for pick in team.pick_set.all %}
{% if pick.player %}
<tr>
  <td>{{ pick.position }}</td>
  <td><a href="{% url person_detail pick.player.slug %}">{{ pick.player }}</a></td>
  <td><a href="{% url draft_detail pick.draft.competition.slug pick.draft.slug %}">{{ pick.draft }}</a></td>
</tr>
{% endif %}
{% endfor %}
</table>

{% if team.standing_set.exists %}
{% include "templatetags/standings.html" with standings=team.standings_by_date %}
{% endif %}

{% if stats %}

<table>
  {% include "templatetags/bio_header.html" %}
  {% for stat in stats %}
  {% include "templatetags/bio.html" %}
  {% endfor %}
</table>

{% endif %}


{% if team.game_set.exists %}

<h3>games</h3>
<table>
  <tr>
    <th>competition</th>
    <th>date</th>
    <th>home team</th>
    <th>score</th>
    <th>away team</th>
  <tr>

  {% for game in team.game_set.all %}
  <tr>
    <td><a href="{% url competition_detail game.competition.slug %}">{{ game.competition.abbreviation }}</a></td>
    <td><a href="{% url date_detail game.date.year game.date.month game.date.day %}">{{ game.date }}</a></td>
    <td><a href="{% url team_detail game.home_team.slug %}">{{ game.home_team }}</a></td>
    <td><a href="{% url game_detail game.id %}">{{ game.score }}</a></td>
    <td><a href="{% url team_detail game.away_team.slug %}">{{ game.away_team }}</a></td>
  </tr>
  {% endfor %}
</table>

{% endif %}



{% endblock %}
