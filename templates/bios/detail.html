{% extends "base.html" %}
{% load datum_or_none %}

{% block title %}{{ bio.name }} - {% endblock %}

{% block content %}



<h3>{{ bio.name }}</h3>

{% if bio.positions %}
<div>Positions: </div>
{% endif %}

{% if bio.height or bio.weight %}
<div>
  {% if bio.height %}Height: {{ bio.height }} cm{% endif %}
  {% if bio.weight %}Weight: {{ bio.weight }} kg{% endif %}
</div>
{% endif %}

{% if bio.birthdate or bio.birthplace %}
<div>
  Born 
  {% if bio.birthdate %}<a href="{% url date_detail bio.birthdate.year bio.birthdate.month bio.birthdate.day %}">{{ bio.birthdate }}</a>{% endif %}
  {% if bio.birthplace %}
  in <a href="{% url place_detail bio.birthplace %}">{{ bio.birthplace }}</a>
  {% endif %}
</div>
{% endif %}


{% if bio.awards.exists %}
<h4>Awards</h4>
<table>
{% for award in bio.awards.all %}
<tr>
  <td><a href="{% url award_detail award.award.id %}">{{ award.award.name }}</a></td>
  <td><a href="{% url season_detail award.season.competition.slug award.season.slug %}">{{ award.season }}</a></td>
</tr>
{% endfor %}
</table>
{% endif %}

<h4>Drafts</h4>
<table>
{% for pick in  bio.pick_set.all %}
<tr>
  <td>{{ pick.position }}</td>
  <td><a href="{% url team_detail pick.team.slug %}">{{ pick.team }}</a></td>
  <td><a href="{% url draft_detail pick.draft.competition.slug pick.draft.slug %}">{{ pick.draft }}</a></td>
{% endfor %}
</table>




{% if bio.position_set.count %}
<h4>Positions</h4>
<table>
{% for position in bio.position_set.all %}
<tr>
  <td><a href="{% url team_detail position.team.slug %}">{{ position.team }}</a></td>
  <td>{{ position.name }}</td>
  {% datum_or_grey position.start %}
  {% datum_or_grey position.end %}
</tr>
{% endfor %}
</table>
{% endif %}

<h4>Stats</h4>
<table>
  <tr>
    <th>competition</th>
    <th>season</th>
    <th>team</th>
    <th>position</th>
    <th>w</th>
    <th>t</th>
    <th>l</th>
    <th>%</th>
    <th>gf</th>
    <th>ga</th>
    <th>gp</th>
    <th>gs</th>
    <th>min</th>
    <th>goals</th>
    <th>assists</th>
    <th>shots</th>
  </tr>

  {% for stat in bio.season_stats %}
  <tr>
    <td><a href="{% url competition_detail stat.competition.slug %}">{{ stat.competition.abbreviation }}</a></td>
    <td><a href="{% url season_detail stat.competition.slug stat.season.slug %}">{{ stat.season.name }}</a></td>
    <td><a href="{% url team_season_detail stat.team.slug stat.season.slug %}">{{ stat.team }}</a></td>
    {% datum_or_grey stat.position %}
    <td>{{ stat.wins|default_if_none:'' }}</td>
    <td>{{ stat.ties|default_if_none:'' }}</td>
    <td>{{ stat.losses|default_if_none:'' }}</td>
    {% if stat.games %}
    <td>{{ stat.win_percentage_100|floatformat }}</td>
    {% else %}
    <td></td>
    {% endif %}
    <td>{{ stat.goals_for|default_if_none:'' }}</td>
    <td>{{ stat.goals_against|default_if_none:'' }}</td>
    {% datum_or_grey stat.games_played %}
    {% datum_or_grey stat.games_started %}
    {% datum_or_grey stat.minutes %}
    {% datum_or_grey stat.goals %}
    {% datum_or_grey stat.assists %}
    {% datum_or_grey stat.shots %}
  </tr>
  {% endfor %}

  {% with stat=bio.career_stat %}
  {% if stat %}
  <tr>
    <td>Career</td>
    <td></td>
    <td></td>
    <td></td>
    <td>{{ stat.wins|default_if_none:'' }}</td>
    <td>{{ stat.ties|default_if_none:'' }}</td>
    <td>{{ stat.losses|default_if_none:'' }}</td>
    <td>{{ stat.win_percentage_100|floatformat }}</td>
    <td>{{ stat.goals_for|default_if_none:'' }}</td>
    <td>{{ stat.goals_against|default_if_none:'' }}</td>
    <td>{{ stat.games_played|default_if_none:'' }}</td>
    <td>{{ stat.games_started|default_if_none:'' }}</td>
    <td>{{ stat.minutes|default_if_none:'' }}</td>
    <td>{{ stat.goals }}</td>
    <td>{{ stat.assists }}</td>
    <td>{{ stat.shots|default_if_none:'' }}</td>
  </tr>
  {% endif %}
  {% endwith %}

</table>

{% if bio.goal_set.exists %}
<h3>goals</h3>
<table>
  <tr>
    <th>Competition</th>
    <th>Date</th>
    <th>Minute</th>
    <th>Team</th>
    <th>Opponent</th>
    <th>Score</th>

  </tr>

  {% for goal in bio.goal_set.all %}
  <tr>
    <td><a href="{% url competition_detail goal.game.competition.slug %}">{{ goal.game.competition.abbreviation }}</a></td>
    <td>{{ goal.game.date }}</td>
    <td>{{ goal.minute }}</td>
    <td><a href="{% url team_detail goal.team.slug %}">{{ goal.team }}</a></td>
    <td><a href="{% url team_detail goal.opponent.slug %}">{{ goal.opponent }}</a></td>
    <td><a href="{% url game_detail goal.game.id %}">{{ goal.game.score }}</a></td>
  {% endfor %}
</table>
{% endif %}


{% if bio.appearance_set.exists %}
<h3>appearances</h3>
<table>
  <tr>
    <th>competition</th>
    <th>date</th>
    <th>team</th>
    <th>opponent</th>
    <th>score</th>
    <th>on</th>
    <th>off</th>
  <tr>

  {% for appearance in bio.appearance_set.all %}
  <tr>
    <td><a href="{% url competition_detail appearance.game.competition.slug %}">{{ appearance.game.competition.abbreviation }}</a></td>
    <td>{{ appearance.game.date }}</td>
    <td><a href="{% url team_detail appearance.team.slug %}">{{ appearance.team }}</a></td>
    <td><a href="{% url team_detail appearance.opponent.slug %}">{{ appearance.opponent }}</a></td>
    <td><a href="{% url game_detail appearance.game.id %}">{{ appearance.game.score }}</a></td>
    <td>{{ appearance.on }}
    <td>{{ appearance.off }}
  </tr>
  {% endfor %}
</table>
{% endif %}

    

{% endblock %}
