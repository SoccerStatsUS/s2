{% extends "base.html" %}
{% load datum_or_none %}

{% block title %}{{ bio.name }} Statistics and Information{% endblock %}
{% block metadescription %}{{ bio.name }} soccer stats with games played, goals scored, bio data, awards...{% endblock %}

{% block extrahead %}

<script type="text/javascript">
  $(document).ready(function (){
  $("div[tab='stats']").load("{% url bio_detail_stats %}?playerid={{ bio.id }}");
  });
</script>

{% endblock %}


{% block content %}


<h3>{{ bio.name }}</h3>


{% if bio.height or bio.weight %}
<div>
  {% if bio.height %}Height: {{ bio.height }} cm{% endif %}
  {% if bio.weight %}Weight: {{ bio.weight }} kg{% endif %}
</div>
{% endif %}

{% if bio.birthdate or bio.birthplace %}
<div>
  Born 
  {% if bio.birthdate %}<a href="{% url date_detail bio.birthdate.year bio.birthdate.month bio.birthdate.day %}">{{ bio.birthdate }}</a>{% endif %}
  {% if bio.birthplace %}
  in <a href="{% url city_detail bio.birthplace.slug %}">{{ bio.birthplace.name }}</a>
  {% endif %}
</div>
{% endif %}

<h4>Awards</h4>
{% if bio.awards.exists %}
<div tab="awards">
<table>
{% for award in bio.awards.all %}
<tr>

  {% if award.season %}
  <td><a href="{% url season_detail award.season.competition.slug award.season.slug %}">{{ award.season.name }}</a></td>
  <td><a href="{% url competition_detail award.season.competition.slug %}">{{ award.season.competition }}</a></td>
  {% else %}
  <td></td>
  <td></td>
  {% endif %}

  <td><a href="{% url award_detail award.award.id %}">{{ award.award.name }}</a></td>


</tr>
{% endfor %}
</table>
</div>
{% endif %}

<h4>Drafts</h4>
{% if bio.pick_set.exists %}
<table>
{% for pick in bio.pick_set.all %}
<tr>
  <td>{{ pick.number }}</td>
  <td><a href="{% url team_detail pick.team.slug %}">{{ pick.team }}</a></td>
  <td><a href="{% url draft_detail pick.draft.competition.slug pick.draft.slug pick.draft.season %}">{{ pick.draft }}</a></td>
</tr>
{% endfor %}
</table>
{% endif %}


<h3>Recent Games</h3>
{% if bio.appearance_set.exists %}
<div tab="games">
{% include "templatetags/appearances/bio.html" with appearances=recent_appearances %}
</div>
{% endif %}



<h4>Salaries</h4>
{% if bio.salary_set.count %}
<div tab="salaries">
<table>
  {% for salary in bio.salary_set.all %}
  <tr>
    <td>{{ salary.season }}</td>
    <td>${{ salary.amount }}</td>
  </tr>
  {% endfor %}
</table>

</div>
{% endif %}


{% if bio.season_stats.exists %}
<div tab="stats">

{% regroup bio.season_stats_with_totals by competition as stats_by_competition %}
{% for item in stats_by_competition %}
<h3>{{ item.grouper }}</h3>
{% include "templatetags/stats/bio.html" with stats=item.list %}
{% endfor %}

<h3>Career</h3>
{% include "templatetags/stats/bio.html" with stats=bio.career_stats %}

</div>
{% endif %}

{% if bio.goal_set.exists %}
<div tab="goals">
{% include "templatetags/goals/bio.html" with goals=bio.goal_set.all %}
</div>
{% endif %}


{% if bio.games_refereed.all %}
<div tab="referee">
{% include "templatetags/games.html" with games=bio.games_refereed.all %}
</div>
{% endif %}





{% if bio.position_stats.exists %}
<div tab="standings">
{% include "templatetags/positions.html" with stats=bio.position_stats %}
</div>
{% endif %}




{% if bio.position_set.count %}
<div tab="coaching">
{% include "templatetags/coach.html" with positions=bio.position_set.all %}
</div>
{% endif %}



{% endblock %}
