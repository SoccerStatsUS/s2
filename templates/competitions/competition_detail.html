{% extends "base.html" %}
{% load datum_or_none %}

{% block title %}{{ competition.name }} - {% endblock %}

{% block content %}


<h3><a href="{% url competition_detail competition.slug %}">{{ competition }}</a></h3>

<table>
{% for award in competition.award_set.all %}
<tr>
  <td><a href="{% url award_detail award.id %}">{{ award }}</a></td>
</tr>
{% endfor %}
</table>


<table>
  <tr>
    <th>competition</th>
    <th>season</th>
    <th>champion</th>
  </tr>

  {% for season in competition.season_set.all %}
  <tr>
    <td>{{ competition }}</td>
    <td><a href="{% url season_detail competition.slug season.slug %}">{{ season.name }}</a></td>
    <td><a href="{{ season.champion.recipient.get_absolute_url }}">{{ season.champion.recipient }}</a></td>
    <td>{{ season.mvp.recipient.name }}</td>
    </tr>
  {% endfor %}
    
</table>

{% if competition.alltime_standings.exists %}

<h4>All-time standings</h4>


<table>
  <tr>
    <th>team</th>
    <th>games</th>
    <th>wins</th>

    {% if competition.first_alltime_standing.ties %}
    <th>ties</th>
    {% endif %}

    <th>losses</th>

    {% if competition.first_alltime_standing.points %}
    <th>points</th>
    {% else %}
    <th>%</th>
    {% endif %}
    
    {% if competition.first_alltime_standing.goals_for %}
    <th>goals for</th>
    <th>goals against</th>
    {% endif %}
  </tr>

  {% for standing in competition.alltime_standings %}
  <tr>

    <td><a href="{% url team_detail standing.team.slug %}">{{ standing.team }}</a></td>
    <td>{{ standing.games }}</td>
    <td>{{ standing.wins }}</td>

    {% if competition.first_alltime_standing.ties %}
    <td>{{ standing.ties|default_if_none:'' }}</td>
    {% endif %}

    <td>{{ standing.losses }}</td>

    {% if competition.first_alltime_standing.points %}
    <td>{{ standing.points }}</td>
    {% else %}
    <td>{{ standing.win_percentage_100|floatformat }}</td>
    {% endif %}

    {% if competition.first_alltime_standing.goals_for %}
    <td>{{ standing.goals_for }}</td>
    <td>{{ standing.goals_against }}</td>
    {% endif %}

  </tr>
  {% endfor %}
</table>

{% endif %}


{% if stats %}

<h4>All-time stats</h4>


<table>
  {% include "templatetags/bio_header.html" %}
  {% for stat in stats %}
  {% include "templatetags/bio.html" %}
  {% endfor %}

</table>

{% endif %}






{% endblock %}
