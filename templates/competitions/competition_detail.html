{% extends "base.html" %}

{% block title %}{{ competition.name }} - {% endblock %}

{% block content %}


<h3><a href="{% url competition_detail competition.slug %}">{{ competition }}</a></h3>

<table>
  <tr>
    <th>competition</th>
    <th>season</th>
  </tr>

  {% for season in competition.season_set.all %}
  <tr>
    <td>{{ competition }}</td>
    <td><a href="{% url season_detail competition.slug season.slug %}">{{ season.name }}</a></td>
    </tr>
  {% endfor %}
    
</table>

{% if competition.alltime_standings.exists %}

<h4>All-time standings</h4>


<table>
  <tr>
    <th>team</th>
    <th>games</th>
    <th>wins</th>

    {% if competition.first_alltime_standing.ties %}
    <th>ties</th>
    {% endif %}

    <th>losses</th>

    {% if competition.first_alltime_standing.points %}
    <th>points</th>
    {% else %}
    <th>%</th>
    {% endif %}
    
    {% if competition.first_alltime_standing.goals_for %}
    <th>goals for</th>
    <th>goals against</th>
    {% endif %}
  </tr>

  {% for standing in competition.alltime_standings %}
  <tr>

    <td><a href="{% url team_detail standing.team.slug %}">{{ standing.team }}</a></td>
    <td>{{ standing.games }}</td>
    <td>{{ standing.wins }}</td>

    {% if competition.first_alltime_standing.ties %}
    <td>{{ standing.ties|default_if_none:'' }}</td>
    {% endif %}

    <td>{{ standing.losses }}</td>

    {% if competition.first_alltime_standing.points %}
    <td>{{ standing.points }}</td>
    {% else %}
    <td>{{ standing.win_percentage_100|floatformat }}</td>
    {% endif %}

    {% if competition.first_alltime_standing.goals_for %}
    <td>{{ standing.goals_for }}</td>
    <td>{{ standing.goals_against }}</td>
    {% endif %}

  </tr>
  {% endfor %}
</table>

{% endif %}


{% if stats %}

<h4>All-time stats</h4>


<table>
  <tr>
    <th>player</th>
    <th>gp</th>
    <th>gs</th>
    <th>min</th>
    <th>goals</th>
    <th>assists</th>
    <th>shots</th>
  </tr>

  {% for stat in stats %}
  <tr>
    {% if stat.player.slug %}
    <td><a href="{% url person_detail stat.player.slug %}">{{ stat.player }}</a></td>
    {% else %}
    <td>{{ stat.player }}</td>
    {% endif %}
    <td>{{ stat.games_played }}</td>
    <td>{{ stat.games_started }}</td>
    <td>{{ stat.minutes }}</td>
    <td>{{ stat.goals }}</td>
    <td>{{ stat.assists }}</td>
    <td>{{ stat.shots }}</td>
  </tr>
  {% endfor %}

</table>

{% endif %}






{% endblock %}
