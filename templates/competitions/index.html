{% extends "base.html" %}

{% load datum_or_none %}

{% block content %}

<form method="GET" action=".">

{% csrf_token %}

{{ form.as_table }}

<input type="submit" value="send" />

</form>

<table id="competition_index">
  <thead>
  <tr>
    <th>competition</th>
    <th>code</th>
    <th>international</th>
    <th>level</th>
    <th>type</th>
    <th>scope</th>
    <th>area</th>
    <th>seasons</th>
    <th>began</th>
    <th>last</th>
    <th>seasons</th>
    <th>gms</th>
  </tr>
  </thead>

  {% for competition in competitions %}
  <tr>
    <td><a href="{% url competition_detail competition.slug %}">{{ competition.name }}</a></td>
    <td>{{ competition.code }}</td>
    <td>{{ competition.international }}</td>
    {% datum_or_grey competition.level %}
    <td>{{ competition.ctype }}</td>
    <td>{{ competition.scope }}</td>
    <td>{{ competition.area }}</td>
    <td>{{ competition.season_set.count }}</td>
    {% if competition.first_season %}
    <td><a href="{% url season_detail competition.slug competition.first_season.slug %}">{{ competition.first_season.name }}</td>
    {% else %}
    <td></td>
    {% endif %}

    {% if competition.last_season %}
    <td><a href="{% url season_detail competition.slug competition.last_season.slug %}">{{ competition.last_season.name }}</td>
    {% else %}
    <td></td>
    {% endif %}

    <td>
      <select>
      {% for season in competition.season_set.all %}
      <option ref="{% url season_detail competition.slug season.slug %}">{{ season.name }}</option>
      {% endfor %}
      </select>
    </td>
    <td>{{ competition.game_set.count }}</td>
  </tr>
  {% endfor %}

</table>
  
{% endblock %}
